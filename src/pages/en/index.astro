---
// src/pages/en/index.astro
// This file assembles all your components into the final homepage.

// Import i18n utilities
import { getLangFromUrl, useTranslations } from "../../i18n/utils"; // <--- IMPORTANT: Ensure these are imported here!

// Import your layout wrapper and components
import Layout from "../../layouts/Layout.astro";
import Header from "@/components/layout/Header.astro"; // <--- IMPORTANT: Ensure Header is imported
import Hero from "@/components/layout/Hero.astro";
import Stats from "@/components/layout/Stats.astro";
import TrustedBy from "@/components/layout/TrustedBy.astro";
import Feature from "@/components/layout/Feature.astro";
import WhyUs from "@/components/layout/WhyUs.astro";
import About from "@/components/layout/About.astro";
import Footer from "@/components/layout/Footer.astro";

// Get the current language and translation function
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang); // <--- This line defines 't'

// ...
---

<Layout title={t("site.title")}>
  <Header lang={lang} t={t} />

  <main>
    {/* Pass lang and t to other components too if they need translations */}
    <Hero lang={lang} t={t} />
    <Stats lang={lang} t={t} />
    <TrustedBy lang={lang} t={t} />
    <Feature lang={lang} t={t} />
    <WhyUs lang={lang} t={t} />
    <About lang={lang} t={t} />
  </main>

  <Footer lang={lang} t={t} />
  {/* Pass lang and t to Footer */}
</Layout>
